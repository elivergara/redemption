{% extends "base.html" %}

{% block content %}
<div class="container mt-2">
    <h2>News</h2>
    {% if user.is_authenticated and user.is_staff %}
    <a href="{% url 'add_news' %}" class="btn btn-primary mb-3">Add News</a>
    {% endif %}

    <div class="row">
        {% if news_articles %}
        {% for news in news_articles %}
        <div class="news-item mb-3">
            <div class="card">
                <div class="card-body">
                    <h5>{{ news.title }}</h5>
                    <div id="carouselExampleControls{{ news.id }}" class="carousel slide mb-3 carousel-dark slide "
                        data-bs-ride="carousel">
                        <div class="carousel-inner">
                            {% if news.image1 %}
                            <div class="carousel-item active">
                                <img src="{{ news.image1.url }}" class="d-block w-100" alt="Image 1">
                            </div>
                            {% endif %}
                            {% if news.image2 %}
                            <div class="carousel-item">
                                <img src="{{ news.image2.url }}" class="d-block w-100" alt="Image 2">
                            </div>
                            {% endif %}
                            {% if news.image3 %}
                            <div class="carousel-item">
                                <img src="{{ news.image3.url }}" class="d-block w-100" alt="Image 3">
                            </div>
                            {% endif %}
                            {% if news.image4 %}
                            <div class="carousel-item">
                                <img src="{{ news.image4.url }}" class="d-block w-100" alt="Image 4">
                            </div>
                            {% endif %}
                            {% if news.image5 %}
                            <div class="carousel-item">
                                <img src="{{ news.image5.url }}" class="d-block w-100" alt="Image 5">
                            </div>
                            {% endif %}
                            {% if news.image6 %}
                            <div class="carousel-item">
                                <img src="{{ news.image6.url }}" class="d-block w-100" alt="Image 6">
                            </div>
                            {% endif %}
                            {% if news.image7 %}
                            <div class="carousel-item">
                                <img src="{{ news.image7.url }}" class="d-block w-100" alt="Image 7">
                            </div>
                            {% endif %}
                            {% if news.image8 %}
                            <div class="carousel-item">
                                <img src="{{ news.image8.url }}" class="d-block w-100" alt="Image 8">
                            </div>
                            {% endif %}
                            {% if news.image9 %}
                            <div class="carousel-item">
                                <img src="{{ news.image9.url }}" class="d-block w-100" alt="Image 9">
                            </div>
                            {% endif %}
                            {% if news.image10 %}
                            <div class="carousel-item">
                                <img src="{{ news.image10.url }}" class="d-block w-100" alt="Image 10">
                            </div>
                            {% endif %}
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleControls{{ news.id }}" role="button"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleControls{{ news.id }}" role="button"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                    <p>{{ news.text|linebreaks|truncatewords:1500 }}</p>

                    <small class="text-muted">By {{ news.author.first_name }} {{ news.author.last_name }}
                        on {{ news.created_at|date:"M d, Y" }}</small>
                    {% if user.is_authenticated and user.is_staff %}
                    <div class="mt-2">
                        <a href="{% url 'edit_news' news.id %}" class="btn btn-warning btn-sm">Edit</a>
                        <a href="{% url 'delete_news' news.id %}" class="btn btn-danger btn-sm">Delete</a>
                    </div>
                    {% endif %}



                </div>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <p>No news articles are available.</p>
        {% endif %}
    </div>
</div>
{% endblock %}